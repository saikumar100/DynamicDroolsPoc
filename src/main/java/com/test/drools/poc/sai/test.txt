 public KieContainer initializeDrools() {
        KieServices kieServices = KieServices.Factory.get();
        Resource dt
                = ResourceFactory
                .newClassPathResource(RuleConstants.RULES_XLSX_FILE_NAME,
                        getClass());

        KieFileSystem kieFileSystem = kieServices.newKieFileSystem().write(dt);
        KieBuilder kieBuilder = kieServices.newKieBuilder(kieFileSystem);
        kieBuilder.buildAll();
        KieRepository kieRepository = kieServices.getRepository();
        ReleaseId krDefaultReleaseId = kieRepository.getDefaultReleaseId();
        Results results = kieBuilder.getResults();
        if( results.hasMessages( Message.Level.ERROR ) ){
            log.error ("{} errors from kie: {}", ProgramPerformanceUtil.TransactionIdLogger.getTransactionIdentifier (), results.getMessages ());
            throw new IllegalStateException( "### errors ###" );
        }

        return kieServices.newKieContainer(krDefaultReleaseId);
    }
    
     KieContainer kieContainer = initializeDrools();
      KieSession kieSession = kieContainer.newKieSession();
        kieSession.setGlobal(RuleConstants.SUMMARY, summary);
        kieSession.setGlobal(RuleConstants.DETAIL, detail);
        kieSession.setGlobal(RuleConstants.SUMMARY_LIST, opportunitiesSummaryList);
        kieSession.setGlobal(RuleConstants.DETAIL_LIST, opportunitiesDetailList);
        kieSession.insert(opportunityInput);
        kieSession.fireAllRules();
  <dependency>
            <groupId>org.kie</groupId>
            <artifactId>kie-ci</artifactId>
            <version>${drools.version}</version>
        </dependency>

        <dependency>
            <groupId>org.drools</groupId>
            <artifactId>drools-decisiontables</artifactId>
            <version>${drools.version}</version>
        </dependency>
        
         List<List<RuleAction>> batchSizedList = ListUtils.partition(inputData, BATCH_SIZE);

            for (List<RuleAction> dataBatchList : batchSizedList) {
                if (!dataBatchList.isEmpty()) {
                    log.info("== Sending Rule InputData to the Kie server ==");

                    List<RuleAction> outList = new ArrayList<>();

                    KieCommands commandsFactory = KieServices.Factory.get().getCommands();

                    SetGlobalCommand setDetailListCommand = new SetGlobalCommand();
                    setDetailListCommand.setIdentifier(DATA_LIST);
                    setDetailListCommand.setObject(outList);
                    setDetailListCommand.setOutIdentifier(DATA_LIST);

                    //batch insertion
                    List<Object> objects = new ArrayList<>(dataBatchList);
                    Command<?> insertElementsCommand = commandsFactory.newInsertElements(objects);

                    Command<?> fireAllRules = commandsFactory.newFireAllRules();
                    Command<?> disposeCommand = commandsFactory.newDispose();

                    BatchExecutionCommand batchExecutionCommand = commandsFactory.newBatchExecution(
                            Arrays.asList(setDetailListCommand, insertElementsCommand, fireAllRules, disposeCommand));


                    ServiceResponse<ExecutionResults> executeResponse = rulesClient.executeCommandsWithResults(containerId, batchExecutionCommand);

                    if (executeResponse.getType() == KieServiceResponse.ResponseType.SUCCESS) {
                        log.info("Received - Commands executed with success! Response: ");

                        List<RuleAction> ruleBatchList=(List<RuleAction>) executeResponse.getResult().getValue(DATA_LIST);

                        log.info("RuleBatchList size = {}", !ruleBatchList.isEmpty() ? ruleBatchList.size():" Empty Response");

                        dataList.addAll(ruleBatchList);

                    } else {
                        log.info("Error executing rules. Message: ");
                        log.error("Error Message: {}", executeResponse.getMsg());
                    }
                }
            }
